{{define "main"}} 

{{ $pages := .Site.RegularPages}}
{{ $categories := $.Site.Taxonomies.categories.ByCount }}


  <h4>categories</h4>
  <button class="" id="selectAllcategories" onclick="htf.showAll('categories')">
    All categories
  </button>
  {{ range $categories }}
  {{ if .Term }}
  <button class="categories-button" id="category-{{ .Term | replaceRE "[.]" "_" | urlize }}" onclick="htf.checkFilter('{{ .Term | replaceRE " [.]" "_" | urlize }}', 'categories-' )">
    <span>{{.Term | humanize | title }}</span>
  </button>
  {{ end }}
  {{ end }}
  
  
  <div>
    <h2><span id="selectedItemCount"></span> Items</h2>
  </div>
  <div class="tf-items-container">
    {{ range $pages.ByPublishDate.Reverse }}
    {{ if .Params.categories }}
      
    <div class="tf-filter-item tf-item" data-categories="{{ with .Params.categories }}{{ range . }}{{ . | replaceRE "[.]" "_" | urlize }} {{ end }}{{ end }}">
      <h4><a href="{{ .RelPermalink }}">{{ .Title }}</a></h4>
  
  
    {{ end }}
  </div>
  {{ end }}
  </div>



{{- $htf := resources.Get "js/vendor/htf/categoriefilter.js"  | resources.Fingerprint -}}
<script type='text/javascript' src="{{ $htf.RelPermalink }}"></script>

<script> 
   var htfConfig = {
    filters: [
      { 
        name: 'categories',
        prefix: 'category-',
        buttonClass: 'category-button',
        allSelector: '#selectAllAuthors',
        attrName: 'data-categories',
      },

    ],

  showItemClass: "show-item",
  filterItemClass: "tf-filter-item",
  activeButtonClass: "active",
  counterSelector: "selectedItemCount",
  populateCount: true,
  setDisabledButtonClass: "disable-button"
}

  var htf = new CategoriesFilter(htfConfig);

  function applyFilter(element) {
    var category = element.id.split('category-');
    htf.resetCount();
    htf.checkFilter(category[1], 'category-');
  }

</script>

{{ end }}

